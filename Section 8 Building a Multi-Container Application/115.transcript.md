**Synopsis:**
In this section, the instructor completes the React Fibonacci calculator by implementing rendering logic and event handling. The `Fib` component is expanded to include a form for user input, helper methods to display stored indexes and calculated values, and event handlers for user interactions and API submissions.

---

### Building the UI and Logic for the Fibonacci Calculator (`Fib.js`)

#### 1. Rendering the Component

The instructor defines a `render()` method in the `Fib` class to output JSX to the browser.

The rendered content includes:

* A **form** where users can enter an index number.
* A **list of all submitted indexes**.
* A **list of all calculated Fibonacci values**.

**Render structure:**

```jsx
render() {
  return (
    <div>
      <form onSubmit={this.handleSubmit}>
        <label>Enter your index:</label>
        <input
          value={this.state.index}
          onChange={event => this.setState({ index: event.target.value })}
        />
        <button>Submit</button>
      </form>

      <h3>Indexes I have seen:</h3>
      {this.renderSeenIndexes()}

      <h3>Calculated Values:</h3>
      {this.renderValues()}
    </div>
  );
}
```

---

#### 2. Displaying Submitted Indexes

The `renderSeenIndexes()` method displays all indexes ever submitted to the backend (fetched from Postgres).

**Logic:**

```javascript
renderSeenIndexes() {
  return this.state.seenIndexes
    .map(({ number }) => number)
    .join(', ');
}
```

* The backend returns an array of objects from Postgres.
* Each object has a `number` property.
* The method extracts all `number` values and joins them with commas for display.

---

#### 3. Displaying Calculated Fibonacci Values

The `renderValues()` method handles rendering data returned from Redis — stored as key-value pairs (index → Fibonacci value).

**Logic:**

```javascript
renderValues() {
  const entries = [];

  for (let key in this.state.values) {
    entries.push(
      <div key={key}>
        For index {key}, I calculated {this.state.values[key]}
      </div>
    );
  }

  return entries;
}
```

* Iterates over the `values` object from state.
* Builds a list of React `<div>` elements showing each Fibonacci result.

---

#### 4. Handling Input and Form Submission

**Controlled Input:**

* The `<input>` tag uses React’s controlled component pattern:

  ```javascript
  value={this.state.index}
  onChange={event => this.setState({ index: event.target.value })}
  ```

**Form Submission Handler:**

```javascript
handleSubmit = async (event) => {
  event.preventDefault();

  await axios.post('/api/values', {
    index: this.state.index
  });

  this.setState({ index: '' });
};
```

* Prevents the default form submission behavior.
* Sends the entered index to the backend (`/api/values`) via Axios.
* Clears the input after successful submission.

---

### Summary

* Added the **render()** method to visually build the Fibonacci calculator UI.
* Implemented two helper methods:

  * `renderSeenIndexes()` – Displays all submitted indexes from Postgres.
  * `renderValues()` – Displays all calculated Fibonacci results from Redis.
* Created controlled input and form submission logic (`handleSubmit()`).
* Completed the interactive React component that connects to backend APIs and dynamically displays calculation results.
