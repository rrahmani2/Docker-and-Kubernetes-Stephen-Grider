### Step 7: Setting Up `.travis.yml` — Google Cloud SDK & Authentication

#### File Creation

* In the project root, create a new configuration file named **`.travis.yml`** (leading dot required).
* This file defines Travis CI’s build and deployment process.

#### Initial Configuration

```yaml
sudo: required
services:
  - docker
```

* `sudo: required` — ensures Travis runs in a VM with root privileges (needed for Docker).
* `services: docker` — preinstalls Docker, allowing image builds and test containers.

#### Pre-Installation Steps (`before_install`)

This section sets up the **Google Cloud SDK** and `kubectl`, which Travis will use to interact with the Kubernetes cluster.

```yaml
before_install:
  - curl https://sdk.cloud.google.com | bash > /dev/null;
  - source $HOME/google-cloud-sdk/path.bash.inc
  - gcloud components update kubectl
```

**Explanation:**

1. `curl https://sdk.cloud.google.com | bash > /dev/null;`

   * Downloads and installs Google Cloud SDK silently.
   * The pipe (`|`) symbol passes the downloaded installer script to `bash`.
   * The output is redirected to `/dev/null` to suppress installation logs.

2. `source $HOME/google-cloud-sdk/path.bash.inc`

   * Loads environment variables and shell configurations for the newly installed SDK.
   * Activates `gcloud` and related CLI commands for immediate use in the current session.

3. `gcloud components update kubectl`

   * Installs or updates **kubectl**, the CLI used to interact with Kubernetes clusters.
   * Required for applying manifests and executing imperative cluster commands later in the pipeline.

#### Google Cloud Authentication Setup

To allow Travis to access your Google Cloud project and GKE cluster, the SDK must be authenticated via a **service account key**.

```yaml
  - gcloud auth activate-service-account --key-file service-account.json
```

**Purpose:**

* Authenticates the Google Cloud SDK using credentials from a service account.
* The `service-account.json` file contains the key and permission scope that Travis will use.
* This functions similarly to AWS IAM credentials — it grants programmatic access to Google Cloud resources.

#### Key Security Consideration

* The file `service-account.json` contains **sensitive credentials**.
* It must **never be committed** to the repository.
* Instead, it should be **encrypted and stored securely** within Travis CI as an environment variable or encrypted file (handled in the next step).

#### Summary of Setup

| Step | Command                                                                | Purpose                                              |                          |
| ---- | ---------------------------------------------------------------------- | ---------------------------------------------------- | ------------------------ |
| 1    | `curl [https://sdk.cloud.google.com](https://sdk.cloud.google.com)     | bash > /dev/null`                                    | Install Google Cloud SDK |
| 2    | `source $HOME/google-cloud-sdk/path.bash.inc`                          | Load SDK environment                                 |                          |
| 3    | `gcloud components update kubectl`                                     | Install/Update `kubectl`                             |                          |
| 4    | `gcloud auth activate-service-account --key-file service-account.json` | Authenticate with Google Cloud using service account |                          |

#### Next Step

Generate a **Google Cloud service account key** (JSON file) with appropriate permissions and securely integrate it into Travis CI for use during builds.
