### Travis CLI Login and Service Account Encryption — Tutor Notes

1. **Login to Travis CLI**

   * Inside the Travis container, authenticate using:

     ```bash
     travis login
     ```
   * The command prompts for **GitHub credentials**, since Travis uses GitHub OAuth authentication.
   * If GitHub **2FA** is enabled, enter the verification code when prompted.
   * Successful login associates the CLI session with the user’s Travis CI account.

2. **Prepare the Google Cloud Service Account File**

   * Locate the downloaded service account JSON file in the local `Downloads` folder.
   * Copy it to the **project directory** (volumed inside the Travis container).
     Example: copy to the `complex` project directory.
   * Rename it for simplicity:

     ```
     service-account.json
     ```
   * Inside the container, verify the file’s presence under `/app`:

     ```bash
     pwd        # should be /app
     ls         # should list service-account.json
     ```

3. **Encrypt the Service Account File**

   * Use the `travis encrypt-file` command:

     ```bash
     travis encrypt-file service-account.json -r <GitHubUsername>/<RepoName>
     ```

   * The `-r` flag ties the encrypted file to a specific GitHub repository.
     **Repository name is case-sensitive**, including capitalization in the GitHub username.

   * Example:

     ```bash
     travis encrypt-file service-account.json -r SampleUser/multi-k8s
     ```

4. **Update `.travis.yml`**

   * The encryption command outputs a line to be added to the **`before_install`** section of `.travis.yml`:

     ```yaml
     before_install:
       - openssl aes-256-cbc -K $encrypted_<key>_key -iv $encrypted_<key>_iv -in service-account.json.enc -out service-account.json -d
     ```
   * Confirm that:

     * It starts with `openssl`.
     * Ends with `-d`.

5. **Manage Encrypted and Original Files**

   * The encryption process creates:

     ```
     service-account.json.enc
     ```

     This is the **encrypted** version — safe to commit and push to GitHub.

   * **Delete** the original unencrypted file:

     ```bash
     rm service-account.json
     ```

     > ⚠️ Critical: Never push `service-account.json` (unencrypted) to GitHub.
     > Exposing it can compromise your Google Cloud account.

   * Verify deletion:

     ```bash
     ls
     # should only show service-account.json.enc
     ```

6. **Commit the Encrypted File**

   * Exit the Travis container:

     ```bash
     exit
     ```
   * Commit the encrypted file in the local repository:

     ```bash
     git add service-account.json.enc
     git commit -m "Added encrypted service account file"
     ```

7. **Result**

   * The repository now contains the **encrypted service account file** ready for secure use in the Travis CI pipeline.
   * The `.travis.yml` file will decrypt it during builds as part of the CI workflow.
