### Travis CI — Docker CLI Login and Test Build Configuration

1. **Add Docker Login to `.travis.yml`**

   * Inside the `before_install` section, add the Docker CLI login command:

     ```yaml
     - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
     ```
   * `docker login` authenticates using environment variables configured in the Travis dashboard.
   * `$DOCKER_USERNAME` and `$DOCKER_PASSWORD` must match **exactly** between the Travis YAML file and the Travis CI environment variable names.

2. **Add Environment Variables in Travis Dashboard**

   * Navigate to:
     **Travis Dashboard → Project → More Options → Settings → Environment Variables**
   * Add the following variables:

     * **DOCKER_USERNAME** = `<your Docker Hub username>`
     * **DOCKER_PASSWORD** = `<your Docker Hub password>`
   * Ensure both variable names match the ones in `.travis.yml` **exactly**, including case sensitivity.
   * Do **not** modify the existing encrypted keys tied to the Google Cloud service account — those are separate.

3. **Build the Test Docker Image**

   * After Docker login, build the test version of the client image:

     ```yaml
     - docker build -t <your_dockerhub_id>/react-test -f ./client/Dockerfile.dev ./client
     ```
   * Explanation:

     * `-t` → Tags the image with a temporary name (`react-test`).
     * `-f` → Specifies the Dockerfile to use (`Dockerfile.dev` in the client directory).
     * Final argument (`./client`) → Build context.

4. **Define the `script` Section**

   * Add a `script` section to define how Travis runs tests:

     ```yaml
     script:
       - docker run <your_dockerhub_id>/react-test npm run test -- --coverage
     ```
   * `-- --coverage` forces the test runner to exit after execution, allowing Travis to detect success or failure instead of hanging in watch mode.

5. **Updated `.travis.yml` Structure (Partial Example)**

   ```yaml
   before_install:
     - openssl aes-256-cbc -K $encrypted_<key>_key -iv $encrypted_<key>_iv \
       -in service-account.json.enc -out service-account.json -d
     - gcloud auth activate-service-account --key-file service-account.json
     - gcloud config set project <project-id>
     - gcloud config set compute/zone us-central1-a
     - gcloud container clusters get-credentials multi-cluster
     - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
     - docker build -t <your_dockerhub_id>/react-test -f ./client/Dockerfile.dev ./client

   script:
     - docker run <your_dockerhub_id>/react-test npm run test -- --coverage
   ```

6. **Summary**

   * Travis now:

     1. Authenticates to Google Cloud.
     2. Logs into Docker Hub.
     3. Builds the client test image.
     4. Runs the test suite via `npm run test -- --coverage`.
   * The next step will involve deploying all updated images to Kubernetes through automated scripts.
