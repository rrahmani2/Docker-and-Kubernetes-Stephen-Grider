### Step 10: Installing Travis CLI Using Docker

#### Objective

Use a **temporary Docker container** with Ruby preinstalled to install and run the **Travis CLI**, which will later encrypt the `service-account.json` file securely for Travis CI.

---

### 1. Why Use Docker for Travis CLI

* The **Travis CLI** is a Ruby-based tool.
* **macOS** already includes Ruby by default.
* On **Windows**, installing Ruby manually is cumbersome.
* To avoid a local Ruby installation, use a **Docker container with Ruby preinstalled**.
* This container will:

  * Run Travis CLI once to encrypt the JSON file.
  * Be discarded afterward (no need for persistence).

---

### 2. Start a Docker Container with Ruby

Run the following command **inside your project root directory (`complex/`)** to launch a Ruby environment and mount your working directory as a volume:

```bash
docker run -it -v $(pwd):/app ruby:2.3 sh
```

> ðŸ’¡ **Windows PowerShell users:** replace `$(pwd)` with `${pwd}`.
> The `-v` flag mounts your current working directory (`complex`) to `/app` inside the container.

**Explanation of flags:**

| Flag             | Purpose                                                     |
| ---------------- | ----------------------------------------------------------- |
| `-it`            | Starts an interactive terminal session                      |
| `-v $(pwd):/app` | Mounts the current directory to `/app` inside the container |
| `ruby:2.3`       | Specifies the Ruby image (version 2.3)                      |
| `sh`             | Starts a shell session inside the container                 |

Once executed, youâ€™ll enter a shell inside the container.
Confirm the volume mapping with:

```bash
ls /app
```

You should see your local project files listed.

---

### 3. Install Travis CLI Inside the Container

Run the following command to install the Travis CLI:

```bash
gem install travis --no-rdoc --no-ri
```

**Notes:**

* `gem` is Rubyâ€™s package manager (similar to `pip` for Python or `npm` for Node.js).
* `--no-rdoc` and `--no-ri` skip documentation downloads for faster installation.
* The installation step **builds native extensions**, which requires additional build tools.

  * These are already included in the full `ruby:2.3` image.
  * The **Alpine** version (`ruby:2.3-alpine`) would fail here because it lacks these dependencies.

> ðŸ§  **Tip:** Alpine images are minimal and lightweight but often lack build dependencies, making them unsuitable for packages requiring compilation (like Travis CLI).

---

### 4. Verify the Installation

After installation, check if the CLI is working:

```bash
travis
```

Youâ€™ll see a list of available Travis commands.
When prompted for shell completion setup, select **No** (not required).

---

### 5. Summary

| Step | Command                                     | Description                              |
| ---- | ------------------------------------------- | ---------------------------------------- |
| 1    | `docker run -it -v $(pwd):/app ruby:2.3 sh` | Start a Ruby container with local volume |
| 2    | `gem install travis --no-rdoc --no-ri`      | Install Travis CLI inside the container  |
| 3    | `travis`                                    | Verify installation                      |

You now have a functional Travis CLI running in a disposable Ruby container â€” no Ruby installation required on your host system.

---

**Next:** Use this Travis CLI instance to **encrypt the `service-account.json` file** and link it securely to your Travis CI project.
