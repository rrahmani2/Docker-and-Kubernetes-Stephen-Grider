### Travis CI — Kubernetes Deployment Setup

1. **Purpose**

   * After configuring Google Cloud and Docker, and successfully building and testing the images, the next step is **deployment**.
   * Travis will execute a **custom deployment script (`deploy.sh`)** that handles the full deployment lifecycle manually.

2. **Why a Custom Script Is Needed**

   * In previous projects (e.g., Elastic Beanstalk), Travis CI supported a built-in deployment provider (`provider: elasticbeanstalk`), which automated deployment.
   * Travis CI **does not provide a Kubernetes deployment provider**.
   * Therefore, deployment must be handled through a **manual script** that executes shell commands for image building, tagging, pushing, and cluster updates.

3. **Deployment Workflow**
   The custom script will:

   1. Build Docker images for all components.
   2. Tag each image appropriately.
   3. Push all images to Docker Hub.
   4. Apply Kubernetes configuration files (`kubectl apply -f k8s`).
   5. Update deployments imperatively using `kubectl set image` for each component.

4. **Add Deploy Section in `.travis.yml`**

   * Update `.travis.yml` with a new `deploy` block:

     ```yaml
     deploy:
       provider: script
       script: bash ./deploy.sh
       on:
         branch: master
     ```
   * **Explanation:**

     * `provider: script` → Tells Travis to run a custom script instead of a built-in deployment process.
     * `script: bash ./deploy.sh` → Specifies the deployment command to execute.
     * `on: branch: master` → Ensures the deployment runs **only when code is pushed to the master branch**, preventing unwanted deployments from feature or dev branches.

5. **Create the Deployment Script**

   * In the root directory of the project, create a new file:

     ```
     deploy.sh
     ```
   * This script will contain all deployment commands, including Docker image builds, tagging, pushes, and Kubernetes updates (to be defined in the next step).

6. **Result**

   * Travis CI will automatically:

     1. Run tests on all branches.
     2. Execute the deployment pipeline only for commits to `master`.
     3. Delegate deployment to the `deploy.sh` script.
