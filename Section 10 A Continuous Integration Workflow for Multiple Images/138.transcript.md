**Synopsis:**
The instructor walks through creating **production Dockerfiles** for the multi-container setup. Each service (worker, server, and Nginx) gets its own production Dockerfile based on its existing development version, with minimal modifications. The primary change is switching the startup command from `npm run dev` to `npm run start`, since the latter is appropriate for production.

---

### Transcript Summary

#### Objective

* Create **production versions** of the existing `Dockerfile.dev` files for all services so Travis CI can build production images for deployment to AWS.

---

### 1. Worker Service

**Steps:**

1. Inside the `worker/` directory, create a new file named `Dockerfile`.
2. Copy all contents from `Dockerfile.dev` into this new file.
3. Change the startup command from:

   ```dockerfile
   CMD ["npm", "run", "dev"]
   ```

   to:

   ```dockerfile
   CMD ["npm", "run", "start"]
   ```
4. Confirm that a `start` script exists in `package.json` — it does.

**Result:**
The worker’s production Dockerfile mirrors the dev version, with the only difference being the production-appropriate `npm run start` command.

---

### 2. Server Service

**Steps:**

1. Inside `server/`, create a new `Dockerfile`.
2. Copy all contents from `Dockerfile.dev`.
3. Replace the command `npm run dev` with `npm run start`.
4. Verify the presence of a `start` script in `package.json`.

**Result:**
Same as the worker — minimal changes, but a dedicated production Dockerfile is still useful for flexibility and future adjustments.

---

### 3. Nginx Service

**Steps:**

1. Inside `nginx/`, create a new `Dockerfile`.
2. Copy the entire content from the dev version.
3. Copy the `default.conf` file into the image to override the default Nginx config.
4. (Optional) Consider removing the WebSocket routing block from `default.conf` if creating a strictly production-specific configuration — though it’s not required here.

**Result:**
Production Dockerfile for Nginx is identical to the dev version for this project’s purpose.

---

### Key Notes

* Each service now has **both dev and production Dockerfiles**.
* Having separate files maintains a **clear boundary between dev and prod environments**.
* The `npm run start` script ensures the container runs in production mode.
* WebSocket configuration could be omitted from production if desired, but it’s not critical.

---

### Summary

* Created **production Dockerfiles** for:

  * `worker`
  * `server`
  * `nginx`
* Adjusted startup commands to `npm run start`.
* Verified configurations are suitable for deployment.
* Client service’s production Dockerfile will be handled next.
