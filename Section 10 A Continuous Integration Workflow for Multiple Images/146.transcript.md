**Synopsis:**
In this section, the instructor extends the Travis CI configuration to **automatically push built Docker images to Docker Hub**. To do this securely, Docker credentials are stored as **encrypted environment variables** in Travis, and a non-interactive Docker login command is used. Once logged in, the build pipeline executes multiple `docker push` commands to upload production images for each sub-project (client, Nginx, server, and worker). The process is then tested by committing and pushing changes to trigger Travis CI.

---

### Step-by-Step Breakdown

#### **1. Purpose of This Step**

After creating production images via Travis CI, the next goal is to **upload them to Docker Hub** so that they’re available for deployment or sharing.
To do this, Travis CI must authenticate with Docker Hub using the Docker CLI.

---

#### **2. Securely Storing Docker Credentials**

Instead of embedding credentials in the `.travis.yml` file (which would expose them publicly), the instructor uses **Travis environment variables**.

Steps:

1. Go to your Travis project page for the repo (e.g., `multi-docker`).
2. Click **More Options → Settings**.
3. Scroll to **Environment Variables** and add:

   * **Name:** `DOCKER_ID` → **Value:** *your Docker Hub username*
   * **Name:** `DOCKER_PASSWORD` → **Value:** *your Docker Hub password*
4. Leave the “Display value in build log” **unchecked** for security.

These variables are encrypted and only accessible within Travis CI.

---

#### **3. Logging into Docker CLI in Travis**

Normally, logging into Docker from a terminal involves prompts for username and password:

```bash
docker login
```

However, Travis CI runs in a **non-interactive** environment, so the login must be scripted as a single-line command using standard input (`stdin`).

Here’s the command added to the `.travis.yml` file:

```bash
echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_ID" --password-stdin
```

**Explanation:**

* `echo "$DOCKER_PASSWORD"` → Outputs the password.
* `|` (pipe) → Sends the password as input to the next command.
* `docker login -u "$DOCKER_ID" --password-stdin` → Logs into Docker using the provided credentials via stdin (avoiding prompts).

---

#### **4. Pushing Docker Images to Docker Hub**

Once logged in, Travis CI can push built images to Docker Hub.
The instructor adds the following commands to the `.travis.yml` file under the script section:

```bash
docker push stephengrider/multi-client
docker push stephengrider/multi-nginx
docker push stephengrider/multi-server
docker push stephengrider/multi-worker
```

Each command uploads a specific image tag created during the build process.

**Key points:**

* These names match the tags used when building images earlier.
* Each image represents a sub-project (React client, Nginx reverse proxy, Node.js server, and worker process).

---

#### **5. Triggering a New Travis Build**

After modifying the `.travis.yml` file, a new commit is made to trigger Travis CI to build and deploy automatically.

Commands executed:

```bash
git status
git add .
git commit -m "change travis yaml"
git push origin master
```

Once pushed:

* Travis detects the change.
* Starts a new build.
* Logs into Docker Hub.
* Builds production images.
* Pushes them to the user’s Docker Hub repository.

---

### **Expected Outcome**

After a few minutes, Travis CI should:

* Successfully complete the build and push steps.
* Show “Build Passed” on the Travis dashboard.
* The four Docker images will appear on Docker Hub under your account.

---

### **Summary**

✅ Docker credentials securely stored in Travis
✅ Travis logs into Docker CLI using non-interactive login
✅ Production images automatically pushed to Docker Hub
✅ Travis build triggered by committing `.travis.yml` changes

---

### **Next Step**

In the upcoming section, the instructor will verify the images on Docker Hub and prepare for the **deployment phase**, where these images will be deployed using **AWS Elastic Beanstalk**.
