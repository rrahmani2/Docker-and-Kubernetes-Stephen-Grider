### Pod Update Limitation — Immutable Fields

#### 1. Context

In the previous section, the **pod configuration file** was updated by changing the container’s image property, and the update succeeded.
In this section, another seemingly minor change—updating the **container port**—is attempted, but Kubernetes rejects it.

---

#### 2. Configuration Change Attempt

Modify the existing pod configuration file (`client-pod.yaml`):

```yaml
containers:
  - name: client
    image: stephengrider/multi-worker
    ports:
      - containerPort: 9999
```

Save the file and attempt to reapply it:

```bash
kubectl apply -f client-pod.yaml
```

---

#### 3. Error Observed

Kubernetes outputs a long error message.
At the top of the message:

```
Error from server (Invalid): Pod "client-pod" is invalid: 
spec: Forbidden: pod updates may not change fields other than 
'containers[*].image', 'spec.activeDeadlineSeconds' or 'spec.tolerations'
```

This indicates that **most pod configuration fields are immutable** after creation.
Kubernetes only allows changes to:

* `containers[*].image`
* `spec.activeDeadlineSeconds`
* `spec.tolerations`

---

#### 4. Explanation

* When you use `kubectl apply` on a **Pod** object, Kubernetes checks the updated configuration against the existing pod’s specification.
* Some fields (like `containerPort`, `volumes`, `labels`, etc.) are **immutable** — they cannot be changed in a live pod.
* This immutability ensures **pod stability** and **predictable behavior** since pods are meant to represent immutable units of deployment.
* The only supported change for a running pod is to replace the **container image** (to enable rolling updates or patch deployments).

---

#### 5. Implication

The earlier statement that “you can update any part of a configuration file and reapply it” is **not true for pods**.
You can’t modify fundamental properties like ports, environment variables, or volume mounts once a pod is created.

---

#### 6. Next Step

To allow more flexible configuration updates (e.g., changing ports, environment variables, or replicas), use **higher-level controllers** like **Deployments** instead of standalone pods.
These controllers manage pod lifecycles and automatically create, replace, or terminate pods as needed when configurations change.

---

#### 7. Key Points

* Pods are **mostly immutable**; only specific fields can be updated.
* Attempting to change immutable fields triggers an **“Invalid”** or **“Forbidden”** error.
* Use **Deployments** (or similar controllers) for dynamic configuration management and rolling updates.
* `kubectl apply` with a pod spec works only for limited updates (primarily the image).
