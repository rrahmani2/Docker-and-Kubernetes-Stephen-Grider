### Adding Environment Variables to Multi-Worker and Multi-Server Deployments – Technical Notes

#### 1. Objective

Add environment variables to the Kubernetes deployment files for **multi-worker** and **multi-server**.
Exclude `PGPASSWORD` for now (to be added later using Kubernetes Secrets).

---

#### 2. Updating Multi-Worker Deployment

**File:** `worker-deployment.yaml`

**Location:** Inside the `template.spec.containers` section.

**Configuration:**

```yaml
env:
  - name: REDIS_HOST
    value: redis-cluster-ip-service
  - name: REDIS_PORT
    value: "6379"
```

**Explanation:**

* The `env` key defines environment variables for the container.
* `REDIS_HOST`: The **ClusterIP service name** that routes requests to the Redis pod.
* `REDIS_PORT`: Default Redis port `6379`, matching the service configuration.

This allows the worker container to connect to Redis inside the cluster via the internal DNS name.

---

#### 3. Updating Multi-Server Deployment

**File:** `server-deployment.yaml`

**Location:** Inside the `template.spec.containers` section.

**Configuration:**

```yaml
env:
  - name: REDIS_HOST
    value: redis-cluster-ip-service
  - name: REDIS_PORT
    value: "6379"
  - name: PGUSER
    value: postgres
  - name: PGHOST
    value: postgres-cluster-ip-service
  - name: PGPORT
    value: "5432"
  - name: PGDATABASE
    value: postgres
```

**Explanation:**

* `REDIS_HOST` / `REDIS_PORT`: For connecting to Redis.
* `PGUSER`: Default PostgreSQL user (`postgres`).
* `PGHOST`: The **ClusterIP service name** for the Postgres database pod.
* `PGPORT`: Default PostgreSQL port (`5432`).
* `PGDATABASE`: Default database name (`postgres`).

All host values reference ClusterIP service names for internal communication between pods.

---

#### 4. Notes

* The current setup uses **default credentials and database names** — acceptable for testing or internal use, but not recommended for production.
* `PGPASSWORD` is **excluded intentionally**; it will be securely managed using **Kubernetes Secrets** in the next step.

---

#### 5. Next Step

Configure `PGPASSWORD` securely using Kubernetes Secrets and integrate it with the deployment configurations.
