### Understanding ClusterIP Services in Kubernetes

**Objective:**
Introduce the **ClusterIP** service type and its role in internal communication between Kubernetes objects, in contrast to the **NodePort** used for external access.

---

### 1. Background

Previously, the **multi-client** deployment used a **NodePort** service to expose pods to the outside world.

* **NodePort** allows external traffic to reach pods using the node’s IP and a high-numbered port (30,000–32,767 range).
* Example: Access via `http://<minikube-ip>:<nodeport>`.

---

### 2. What Is a ClusterIP?

* **ClusterIP** provides **internal-only access** within the Kubernetes cluster.
* It exposes a set of pods (typically managed by a deployment) to **other objects** inside the same cluster but **not** to external users or systems.
* It is the **default** service type in Kubernetes.

**Key Points:**

* Used for **internal service-to-service communication** (e.g., between backend, worker, and database pods).
* **Not accessible** from outside the cluster — no public IP or external routing.
* Each ClusterIP service gets a **stable internal IP address** and DNS name for discovery.

---

### 3. Practical Example in This Application

Within the **multi-container architecture**:

* A ClusterIP service exposes **Redis** to the **worker** pods.
* Without this service, Redis pods would be isolated and unreachable by other components.

**Use Case Summary:**

| Component    | Accessible By           | Service Type                   | Purpose                |
| ------------ | ----------------------- | ------------------------------ | ---------------------- |
| Multi-Client | End Users (via Ingress) | ClusterIP (fronted by Ingress) | Frontend UI            |
| Multi-Server | Internal (via Ingress)  | ClusterIP                      | API Backend            |
| Redis        | Internal Only           | ClusterIP                      | In-memory store        |
| Worker       | Internal Only           | ClusterIP                      | Background computation |

---

### 4. Key Difference: NodePort vs. ClusterIP

| Feature       | NodePort                 | ClusterIP                            |
| ------------- | ------------------------ | ------------------------------------ |
| Access Scope  | External + Internal      | Internal Only                        |
| Use Case      | Expose app to users      | Internal service communication       |
| IP/Port       | Node’s IP + 30k–32k port | Virtual internal IP                  |
| Example Usage | Testing, Dev, Small Apps | Production microservice architecture |

---

### 5. Interaction with Ingress

* In production, **Ingress** serves as the **single entry point** for external traffic.
* Ingress routes incoming HTTP/S requests to internal services (ClusterIPs).
* Thus, external access → **Ingress → ClusterIP → Pod(s)**.

---

### 6. Next Step

Create a **ClusterIP service manifest** for the **multi-client deployment**, defining internal routing and communication within the cluster.
