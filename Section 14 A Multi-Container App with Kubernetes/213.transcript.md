### Verifying and Applying Kubernetes Config Files

**Objective:**
Validate the `client-deployment.yaml` and `client-cluster-ip-service.yaml` configurations by deploying them to the cluster and confirming proper creation.

---

### 1. Clean Up Previous Resources

Before applying new configurations, remove any existing deployments and services from prior exercises.

```bash
# List existing deployments
kubectl get deployments

# Delete old client deployment
kubectl delete deployment client-deployment

# Verify deletion
kubectl get deployments
# Output: No resources found
```

Next, remove the previous NodePort service associated with that deployment:

```bash
# List existing services
kubectl get services

# Delete the old NodePort service
kubectl delete service client-node-port

# Verify remaining services
kubectl get services
# Output: Only the default 'kubernetes' service remains
```

---

### 2. Apply Multiple Configurations at Once

Instead of applying each YAML file individually, use the directory-level apply command:

```bash
# Apply all configuration files in the 'k8s' directory
kubectl apply -f k8s/
```

Kubernetes automatically scans the directory and applies every YAML configuration inside it (e.g., deployment, service, config map, etc.).

---

### 3. Handling Configuration Errors

If a typo or validation error occurs (e.g., incorrect field name such as `metadata.label` instead of `metadata.labels`), fix it directly in the YAML file and reapply:

```bash
# Correct field
metadata:
  labels:
    component: web

# Reapply after correction
kubectl apply -f k8s/
```

---

### 4. Verify Deployment and Service Creation

```bash
# Check deployments
kubectl get deployments
# Expected: client-deployment with desired replicas (e.g., 3)

# Check running pods
kubectl get pods
# Expected: three running pods matching the client deployment

# Check services
kubectl get services
# Expected: client-cluster-ip-service and default kubernetes service
```

---

### 5. Key Takeaways

* Use `kubectl apply -f <directory>` to apply **all YAML files** in a directory efficiently.
* **ClusterIP services** are not externally accessible â€” browser testing is not possible at this stage.
* Always validate successful creation using `kubectl get` commands.
* Fix typos like pluralization errors (`labels` vs. `label`) immediately before reapplying.

---

**Result:**
Both the `client-deployment` and `client-cluster-ip-service` are successfully created, confirming that configurations are valid and Kubernetes objects are running as expected.
