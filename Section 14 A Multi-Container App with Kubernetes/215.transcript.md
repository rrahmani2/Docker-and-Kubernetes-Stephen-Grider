### Multi-Server ClusterIP Service Configuration

**Objective:**
Create a **ClusterIP service** to provide internal access to the **multi-server (Express API)** pods running inside the cluster.

---

### 1. File Setup

Create a new Kubernetes configuration file inside the `k8s` directory:
**`server-cluster-ip-service.yaml`**

---

### 2. Service YAML Configuration

```yaml
apiVersion: v1
kind: Service
metadata:
  name: server-cluster-ip-service
spec:
  type: ClusterIP
  selector:
    component: server
  ports:
    - port: 5000
      targetPort: 5000
```

---

### 3. Configuration Breakdown

| Field                          | Purpose                                                                                             |
| ------------------------------ | --------------------------------------------------------------------------------------------------- |
| **apiVersion: v1**             | Uses the core Kubernetes API for defining services.                                                 |
| **kind: Service**              | Declares this as a Kubernetes Service object.                                                       |
| **metadata.name**              | Names the service `server-cluster-ip-service`.                                                      |
| **spec.type: ClusterIP**       | Exposes the service internally within the cluster only.                                             |
| **selector.component: server** | Selects pods labeled `component: server` from the `server-deployment.yaml`.                         |
| **ports.port**                 | The port other internal services or pods use to reach the server service.                           |
| **ports.targetPort**           | The container port (inside the pod) that receives the traffic. Both are `5000` here for simplicity. |

---

### 4. Behavior Summary

* The ClusterIP service routes traffic internally between cluster components.
* The **multi-server pods** are not externally accessible.
* **Ingress** will later act as the public entry point and route requests internally to this ClusterIP.

---

### 5. Result

This service enables other internal pods (e.g., workers, client, or Ingress) to communicate with the Express API pods using the internal DNS name:

```
server-cluster-ip-service:5000
```

No external access is permitted â€” communication is limited to inside the Kubernetes cluster.
