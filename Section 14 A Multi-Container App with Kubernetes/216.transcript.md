### Combining Multiple Kubernetes Configuration Files

**Objective:**
Understand how to manage multiple Kubernetes object configuration files and the option to consolidate them into fewer files.

---

### 1. Current Approach

Each Kubernetes object (e.g., Deployment, Service, Ingress) is defined in a **separate YAML file** inside the `k8s` directory.
Example structure:

```
client-deployment.yaml
client-cluster-ip-service.yaml
server-deployment.yaml
server-cluster-ip-service.yaml
```

Each file corresponds to one Kubernetes object.

---

### 2. Alternative Approach: Combining Configurations

You can combine multiple Kubernetes configurations (for example, a Deployment and its associated Service) into **one YAML file** by separating them with `---`.

#### Example:

**`server-config.yaml`**

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: server-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      component: server
  template:
    metadata:
      labels:
        component: server
    spec:
      containers:
        - name: server
          image: <docker-id>/multi-server
          ports:
            - containerPort: 5000
---
apiVersion: v1
kind: Service
metadata:
  name: server-cluster-ip-service
spec:
  type: ClusterIP
  selector:
    component: server
  ports:
    - port: 5000
      targetPort: 5000
```

Each object definition is separated by `---` to indicate multiple Kubernetes resources in the same file.

---

### 3. Advantages of Combining Config Files

* **Fewer files** to manage.
* Related resources (like a Deployment and its Service) are grouped together.
* Easier to apply (`kubectl apply -f server-config.yaml` handles both objects).

---

### 4. Disadvantages

* **Harder to locate specific configurations:**
  Engineers must know which file contains a specific resource.
* **Less clarity:**
  New contributors may struggle to identify where to modify a particular service or deployment.
* **Naming ambiguity:**
  File names must clearly indicate that they include multiple resources (e.g., `multi-client-config.yaml`).

---

### 5. Recommended Approach (Best Practice for Clarity)

Keep **one configuration file per object**.

* Maintains transparency on how many resources exist.
* Makes it immediately clear where each object’s configuration resides.
* Simplifies collaboration — others can quickly locate and modify specific resources.

---

### 6. Summary

| Approach                      | Pros                              | Cons                                 | Recommended |
| ----------------------------- | --------------------------------- | ------------------------------------ | ----------- |
| **Separate files per object** | Clear structure, easy maintenance | More files                           | ✅ Yes       |
| **Combined files**            | Fewer files, grouped configs      | Harder navigation, unclear structure | ❌ No        |

---

### 7. Cleanup Example

The example `server-config.yaml` file (used for demonstration) was deleted to revert to the standard structure with four individual configuration files:

```
client-deployment.yaml
client-cluster-ip-service.yaml
server-deployment.yaml
server-cluster-ip-service.yaml
```
