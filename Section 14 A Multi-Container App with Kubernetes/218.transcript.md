### Applying Server and Worker Deployments to the Cluster

**Objective:**
Apply all configuration files for the worker and server components using `kubectl apply`, verify deployment, and review pod logs.

---

### 1. Apply Configuration Files

Command to apply all configurations in the `k8s` directory:

```bash
kubectl apply -f k8s/
```

**Details:**

* Applying a directory applies **all YAML files** within it (e.g., deployments, services).
* Kubernetes checks each file by **object name** and **type**:

  * If an object already exists, Kubernetes **updates** it if changes exist.
  * If unchanged, the object is left **as-is**.
  * If new, it is **created**.
* This allows safely reapplying the entire directory whenever configuration files are modified.

**Expected Outcome:**

* Existing objects (e.g., client deployment, client service) → *unchanged*
* Newly added objects (e.g., server deployment, worker deployment, server service) → *created*

---

### 2. Verify Deployments and Pods

Check active pods:

```bash
kubectl get pods
```

Expected:

* `server-deployment` pod
* `worker-deployment` pod
* Both may initially **run successfully**, though they will later fail to connect to Redis or Postgres (not yet configured).

Check deployments:

```bash
kubectl get deployments
```

Expected:

* `client-deployment`
* `server-deployment`
* `worker-deployment`

Check services:

```bash
kubectl get services
```

Expected:

* `client-cluster-ip-service`
* `server-cluster-ip-service`

---

### 3. Inspect Pod Logs

Retrieve logs for any running pod:

```bash
kubectl logs <pod-name>
```

**Example Output:**

```
> node index.js
Error: connect ECONNREFUSED <ip>:5432
```

**Explanation:**

* Node.js starts via the `npm start` command (as defined in the image).
* The error `ECONNREFUSED` indicates the pod is attempting to connect to **Redis** (default port **5432**) but no Redis service is available yet.
* This is expected until Redis and Postgres configurations are added.

---

### 4. Key Notes

| Component | Expected Status                            | Reason                          |
| --------- | ------------------------------------------ | ------------------------------- |
| Server    | Running (may show Redis connection errors) | Redis not yet configured        |
| Worker    | Running (may show Redis connection errors) | Redis not yet configured        |
| Client    | Running                                    | Already configured and deployed |
| Redis     | Not yet deployed                           | Next step                       |
| Postgres  | Not yet deployed                           | Later step                      |

---

### 5. Next Steps

* Configure and deploy **Redis** using a new set of YAML files.
* After Redis setup, return to the **server** and **worker** configurations to add environment variables for Redis connection.
* Later, configure **Postgres** for persistent storage.
