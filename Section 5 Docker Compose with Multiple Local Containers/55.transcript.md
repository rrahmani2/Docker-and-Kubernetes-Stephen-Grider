### **Synopsis**

This section introduces how to handle containers that crash unexpectedly, using a forced crash in the Node.js application as an example, and sets up the context for automatically restarting containers using Docker Compose.

---

### **Details**

1. **Simulating a Crash**

   * In `index.js`, add:

     ```javascript
     const process = require('process');
     ```
   * Inside the root route handler:

     ```javascript
     process.exit(0);
     ```
   * This forces the Node.js server to exit whenever someone visits the root route. The `0` indicates a normal exit code, but Docker still treats the container as stopped.

2. **Testing the Crash**

   * Rebuild the container with Docker Compose:

     ```bash
     docker-compose up --build
     ```
   * Visit `http://localhost:4001`. The container immediately exits.
   * Running `docker ps` shows that the Node.js container is no longer running, only Redis remains.

3. **Problem Statement**

   * Containers can crash due to software errors.
   * Without any intervention, crashed containers stay stopped.
   * We need a way to automatically restart containers if they fail.

4. **Next Steps**

   * Docker Compose provides options to define **restart policies** for containers.
   * This allows a container to automatically restart when it crashes, ensuring higher availability of services.

This sets the stage for using `restart` policies in the Docker Compose file to handle unexpected container failures.
