### Verifying Certificate Issuance and Preparing for TLS Configuration — Technical Notes

**Objective:**
Confirm that Cert-Manager successfully obtained and stored a valid TLS certificate from Let’s Encrypt, and prepare to configure NGINX Ingress to use it for HTTPS traffic.

---

#### 1. **Check Certificate Object**

Run the following command to verify the certificate resource exists:

```bash
kubectl get certificates
```

Example output:

```
NAME               READY   SECRET               AGE
k8smulti-com-tls   True    k8smulti.com         2m
```

This confirms that the certificate resource has been created and recognized by the cluster.

---

#### 2. **Inspect Certificate Details**

To view status and event logs:

```bash
kubectl describe certificate k8smulti-com-tls
```

Key points to check:

* Ignore top-level fields like:

  ```
  Status: False
  Type: ValidateFailed
  ```

  These can appear transiently during validation.
* Focus on the **Events** section at the bottom, which should show:

  ```
  Created new ACME order, attempting validation
  Domain www.k8smulti.com verified successfully
  Domain k8smulti.com verified successfully
  Certificate issued successfully
  ```

These entries confirm that:

* Let’s Encrypt ACME challenge completed.
* Certificate issuance succeeded.

---

#### 3. **Verify the TLS Secret**

The `Certificate` object’s `secretName` defines where Cert-Manager stores the resulting certificate and private key.
To list secrets:

```bash
kubectl get secrets
```

Expected output:

```
NAME                TYPE                DATA   AGE
k8smulti.com        kubernetes.io/tls   2      5m
```

Explanation:

* `TYPE: kubernetes.io/tls` → confirms this secret holds a TLS cert and key.
* `DATA: 2` → indicates two keys are stored:

  * `tls.crt` → public certificate
  * `tls.key` → private key

**Do not view or print the contents** of the secret (`kubectl get secret ... -o yaml`), as it exposes private key material.

---

#### 4. **Automatic Renewal**

Cert-Manager will automatically monitor the certificate’s validity period.
When the expiration approaches (typically within 30 days of expiry), it will:

* Revalidate ownership via the same ACME HTTP challenge.
* Request a new certificate.
* Overwrite the existing secret with renewed data.

This process requires no manual intervention once configured.

---

#### 5. **Next Step: Enable HTTPS via Ingress**

Now that the TLS secret is confirmed:

* Update your **Ingress** manifest to reference it.
* Add a `tls` section with `hosts` and the `secretName` pointing to the created secret:

  ```yaml
  tls:
    - hosts:
        - k8smulti.com
        - www.k8smulti.com
      secretName: k8smulti.com
  ```
* Apply the updated Ingress:

  ```bash
  kubectl apply -f k8s/ingress-service.yaml
  ```

Once this is done, NGINX Ingress will start serving HTTPS traffic using the newly issued Let’s Encrypt TLS certificate.

---

**Summary:**
Cert-Manager successfully completed the ACME challenge, obtained a valid TLS certificate from Let’s Encrypt, and stored it as a Kubernetes secret (`k8smulti.com`). The system will auto-renew this certificate before expiration. The next step is to configure the NGINX Ingress to use this secret for HTTPS.
