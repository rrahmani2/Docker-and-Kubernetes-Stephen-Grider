**Synopsis:**
We successfully run the Node.js container, but previously all project files were copied into the root directory, which is not ideal. Using the `WORKDIR` instruction in the Dockerfile allows us to isolate the project in a dedicated folder inside the container, preventing conflicts with system directories.

---

**Content:**

1. **Problem:**

   * Project files (`index.js`, `package.json`, `node_modules`) were copied directly into the root directory of the container.
   * Copying to root risks overwriting important system files or causing conflicts with directories like `/lib`, `/var`, or `/root`.

2. **Solution:**

   * Use the `WORKDIR` instruction in the Dockerfile:

     ```
     WORKDIR /user/app
     ```

     * Creates the directory `/user/app` if it does not exist.
     * Any subsequent instructions in the Dockerfile, including `COPY` and `RUN npm install`, will execute relative to this directory.
     * Ensures project files are isolated in `/user/app`.

3. **Steps:**

   1. Add `WORKDIR /user/app` **above** the `COPY` instruction in the Dockerfile.
   2. Rebuild the image (tag it if desired):

      ```
      docker build -t <docker-id>/simpleweb .
      ```

      * Because `WORKDIR` changed before `COPY` and `npm install`, the NPM install step runs again from scratch.
   3. Start the container with port mapping:

      ```
      docker run -p 8080:8080 <docker-id>/simpleweb
      ```

      * Web application is accessible at `http://localhost:8080`.

4. **Verifying inside the container:**

   * Start a shell inside the running container:

     ```
     docker exec -it <container-id> sh
     ```
   * You will be placed directly inside `/user/app`.
   * `ls` shows project files isolated in this directory.
   * Root directory (`/`) is clean and free of potential conflicts.

5. **Benefits:**

   * Prevents overwriting system files.
   * Keeps project files organized and isolated.
   * `WORKDIR` also affects runtime commands executed via `docker exec`.

---

**Summary:**

* Using `WORKDIR` isolates project files inside a dedicated container directory (`/user/app`).
* Subsequent `COPY` and `RUN` instructions execute relative to this folder.
* Application runs successfully with files organized safely, avoiding conflicts with container system directories.
