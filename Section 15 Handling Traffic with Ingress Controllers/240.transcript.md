### How Ingress Works Internally (Ingress-NGINX Overview)

#### 1. Recap: Kubernetes Controllers and Desired State

Kubernetes uses **controllers** to ensure the cluster matches its **desired state** defined in configuration files.

* Example: A **Deployment** manages replica counts for pods (e.g., 3 replicas running the `multi-client` image).
* Kubernetes continuously compares the **current state** vs. the **desired state**, then reconciles differences automatically.

---

#### 2. Ingress Controller as a Kubernetes Controller

An **Ingress** follows the same controller pattern:

* You define an **Ingress config file** describing **routing rules** — how external traffic should reach services inside the cluster.
* You apply it with:

  ```bash
  kubectl apply -f ingress-config.yaml
  ```
* Kubernetes creates an **Ingress Controller**, which continuously ensures the routing configuration is implemented.

This controller:

* Monitors the desired routing rules.
* Creates the necessary internal infrastructure (e.g., networking, reverse proxy).
* Ensures incoming requests are routed to the correct backend services.

---

#### 3. Role of NGINX in Ingress-NGINX

For the **Ingress-NGINX** project:

* The controller is **backed by NGINX** running inside a pod.
* This NGINX instance reads the routing rules from the Ingress configuration and applies them dynamically.
* It acts as the **reverse proxy** that:

  1. Accepts incoming HTTP/HTTPS traffic.
  2. Examines routing parameters.
  3. Forwards requests to the correct Kubernetes service.

---

#### 4. Architectural Simplification in Ingress-NGINX

In general Ingress implementations, the architecture includes:

* An **Ingress Config**
* An **Ingress Controller**
* A **Traffic Router/Proxy**

However, in **Ingress-NGINX**, the **controller and proxy** are **combined**:

* The same NGINX-based deployment both:

  * Watches for Ingress resource changes.
  * Serves as the active load-balancing endpoint.

**Simplified flow for Ingress-NGINX:**

```
Ingress Config (YAML)
        ↓
   kubectl apply
        ↓
Ingress-NGINX Controller (Deployment)
   ↳ Reads routing rules
   ↳ Runs NGINX to route incoming traffic
```

---

#### 5. Summary

* **Ingress Config** defines desired routing rules.
* **Ingress-NGINX Controller** enforces those rules and directly handles network traffic.
* The **controller and proxy** functions are merged into one NGINX-based deployment.

This setup ensures external traffic reaches the correct internal services according to the routing configuration.
