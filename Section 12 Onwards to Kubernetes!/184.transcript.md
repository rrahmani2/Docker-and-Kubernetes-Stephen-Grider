# **Tutor Notes: Understanding Kubernetes Pods**

---

## **1. Context**

* Previously, `apiVersion` and `kind` fields in YAML files were explained.
* This section focuses on **Pods**, followed by an overview of **Services**.

---

## **2. Pods and Nodes**

* When `minikube start` is executed, it creates a **virtual machine** (VM) on the local system.
* This VM is referred to as a **node** in Kubernetes.
* Nodes run various **Kubernetes objects**, such as Pods, Services, etc.
* A **Pod** is one of the **basic Kubernetes objects** that can be created and run on a node.

---

## **3. What Is a Pod**

* A **Pod** is the smallest deployable unit in Kubernetes.
* It represents a **group of one or more containers** that share a common purpose.
* Kubernetes does **not** allow running a container directly; containers **must be deployed within a Pod**.
* Example: In Docker Compose or Elastic Beanstalk, containers can be run individually.
  In Kubernetes, even a single container must be wrapped inside a Pod.

---

## **4. Why Pods Exist**

* A Pod ensures one or more containers run together in a tightly integrated environment.
* Containers in the same Pod:

  * **Share the same network namespace** (can communicate via `localhost`).
  * **Share the same storage volumes** if configured.
  * Are **scheduled on the same node**.
* The Pod acts as a **logical host** for its containers.

---

## **5. When to Use Multiple Containers in a Pod**

* Multiple containers should only be used when they are **tightly coupled** and must always run together.
* Example:

  * **Pod with multiple containers:**

    * `postgres` → main database container.
    * `logger` → connects to Postgres to store logs.
    * `backup-manager` → performs backups of Postgres data.
* All these containers depend on each other. If the Postgres container stops, the other two become useless.

### **Contrast Example**

* In a multi-container web app (React + NGINX + Express + Worker):

  * If one container fails, others can still operate.
  * These are **loosely coupled** containers → should be in separate Pods, not the same one.

---

## **6. Pod Characteristics**

| Attribute                   | Description                                                            |
| --------------------------- | ---------------------------------------------------------------------- |
| Smallest deployable unit    | Kubernetes does not run containers directly; Pods are the atomic unit. |
| Runs one or more containers | Typically one container per Pod for simplicity.                        |
| Shared resources            | Containers share networking and storage.                               |
| Tight coupling              | Multiple containers only when they must run together.                  |

---

## **7. Pod Configuration Example (`client-pod.yml`)**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: client-pod
spec:
  containers:
    - name: client
      image: your-dockerhub-repo/client-image
      ports:
        - containerPort: 3000
```

### **Explanation**

* **`apiVersion: v1`** → Uses the core Kubernetes API.
* **`kind: Pod`** → Defines a Pod object.
* **`metadata.name`** → Logical name for the Pod (useful for logging and referencing).
* **`containers`** → Lists containers inside the Pod.

  * **`name`** → Identifier for the container (used for referencing or internal networking).
  * **`image`** → Docker image to run (from Docker Hub or another registry).
  * **`ports.containerPort`** → Exposes container port `3000`.

---

## **8. Purpose of Exposing Port 3000**

* The container runs an **NGINX server** that listens on port **3000**.
* Exposing this port allows future Service objects to connect external traffic to this container.
* Note:

  * `containerPort: 3000` only exposes the port **inside the Pod**.
  * It does **not** automatically make it accessible externally.
  * External access is configured through a **Service** object.

---

## **9. Key Takeaways**

| Concept             | Description                                                                   |
| ------------------- | ----------------------------------------------------------------------------- |
| Pod                 | Smallest deployable unit in Kubernetes; runs one or more containers.          |
| Node                | Virtual or physical machine where Pods run.                                   |
| Container in Pod    | Always part of a Pod, never standalone.                                       |
| Multi-container Pod | Used only when containers have a strict dependency on each other.             |
| containerPort       | Exposes internal port of the container; external exposure requires a Service. |

---

**Next Topic:** Understanding the **Service** object — how it provides network access to the Pod and enables external communication.
